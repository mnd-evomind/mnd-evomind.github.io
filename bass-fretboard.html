<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>Bass 指板圖 - 音名標示</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
      background-color: #121212;
      color: #eee;
    }
    label, input {
      margin: 0.5rem;
      font-size: 1rem;
    }
    input {
      padding: 0.25rem 0.5rem;
      background-color: #1e1e1e;
      color: #eee;
      border: 1px solid #444;
      border-radius: 4px;
    }
    .fretboard {
      display: grid;
      grid-template-columns: 60px repeat(4, 60px);
      border: 2px solid #444;
      border-radius: 10px;
      overflow: hidden;
      background: #1e1e1e;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      margin-top: 1rem;
    }
    .fretboard > div {
      border: 1px solid #333;
      padding: 6px;
      text-align: center;
    }
    .fret-number {
      background-color: #222;
      font-weight: bold;
    }
    .highlight {
      background-color: #ffc107;
      font-weight: bold;
      color: #000;
    }
  </style>
</head>
<body>
  <h2>Bass 指板圖</h2>
  <label for="degree">輸入音階級數（例如 2、3b、1b，可用逗號分隔多個）：</label>
  <input type="text" id="degree" placeholder="例如 2b, 3" oninput="highlightDegree()" />

  <div class="fretboard" id="fretboard"></div>

  <script>
    const strings = ['E', 'A', 'D', 'G'];
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];

    const degreeMap = {
      '1': 'C', '1b': 'B',
      '2': 'D', '2b': 'C#',
      '3': 'E', '3b': 'D#',
      '4': 'F',
      '5': 'G',
      '6': 'A', '6b': 'G#',
      '7': 'B', '7b': 'A#'
    };

    function getNoteAt(stringNote, fret) {
      const index = (notes.indexOf(stringNote) + fret) % 12;
      return notes[index];
    }

    function renderFretboard(highlightNotes = []) {
      const fretboard = document.getElementById('fretboard');
      fretboard.innerHTML = '';

      // Header row
      fretboard.appendChild(document.createElement('div'));
      strings.forEach(s => {
        const div = document.createElement('div');
        div.textContent = s;
        fretboard.appendChild(div);
      });

      for (let fret = 0; fret <= 20; fret++) {
        const fretLabel = document.createElement('div');
        fretLabel.textContent = fret;
        fretLabel.className = 'fret-number';
        fretboard.appendChild(fretLabel);

        strings.forEach(s => {
          const note = getNoteAt(s, fret);
          const div = document.createElement('div');
          div.textContent = note;
          if (highlightNotes.includes(note)) {
            div.classList.add('highlight');
          }
          fretboard.appendChild(div);
        });
      }
    }

    function highlightDegree() {
      const input = document.getElementById('degree').value.trim();
      const degrees = input.split(',').map(d => d.trim());
      const notes = degrees.map(d => degreeMap[d]).filter(Boolean);
      renderFretboard(notes);
    }

    renderFretboard();
  </script>
</body>
</html>
